{
  "id": "flux-redux-wan21-ugc-pipeline-90gb-ultimate",
  "revision": 1,
  "last_node_id": 80,
  "last_link_id": 120,
  "nodes": [
    {
      "id": 1,
      "type": "LoadImage",
      "pos": [-1400, -900],
      "size": [300, 314],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [1, 2]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "title": "üì¶ Product Image",
      "properties": {
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": ["product.png", "image"],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 2,
      "type": "LoadImage",
      "pos": [-1400, -500],
      "size": [300, 314],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [3]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "title": "üñºÔ∏è Background Reference",
      "properties": {
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": ["background.png", "image"],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 3,
      "type": "UNETLoader",
      "pos": [-1050, 100],
      "size": [315, 82],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "slot_index": 0,
          "links": [10]
        }
      ],
      "title": "‚ö° FLUX Dev (FP16)",
      "properties": {
        "Node name for S&R": "UNETLoader"
      },
      "widgets_values": ["flux1-dev.safetensors", "fp16"],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 4,
      "type": "VAELoader",
      "pos": [-1050, 250],
      "size": [315, 58],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "VAE",
          "type": "VAE",
          "slot_index": 0,
          "links": [11, 12]
        }
      ],
      "title": "üé® FLUX VAE",
      "properties": {
        "Node name for S&R": "VAELoader"
      },
      "widgets_values": ["ae.safetensors"],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 5,
      "type": "DualCLIPLoader",
      "pos": [-1050, 380],
      "size": [315, 106],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "CLIP",
          "type": "CLIP",
          "slot_index": 0,
          "links": [13]
        }
      ],
      "title": "üìù T5 + CLIP",
      "properties": {
        "Node name for S&R": "DualCLIPLoader"
      },
      "widgets_values": ["t5xxl_fp16.safetensors", "clip_l.safetensors", "flux"],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 6,
      "type": "CLIPVisionLoader",
      "pos": [-1050, 550],
      "size": [315, 58],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "CLIP_VISION",
          "type": "CLIP_VISION",
          "slot_index": 0,
          "links": [14]
        }
      ],
      "title": "üëÅÔ∏è CLIP Vision (SigLIP)",
      "properties": {
        "Node name for S&R": "CLIPVisionLoader"
      },
      "widgets_values": ["sigclip_vision_patch14_384.safetensors"],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 7,
      "type": "StyleModelLoader",
      "pos": [-1050, 680],
      "size": [315, 58],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STYLE_MODEL",
          "type": "STYLE_MODEL",
          "slot_index": 0,
          "links": [15]
        }
      ],
      "title": "üé≠ Redux Style Model",
      "properties": {
        "Node name for S&R": "StyleModelLoader"
      },
      "widgets_values": ["flux1-redux-dev.safetensors"],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 8,
      "type": "CLIPTextEncode",
      "pos": [-600, -800],
      "size": [450, 150],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 13
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": [16, 17]
        }
      ],
      "title": "‚úçÔ∏è Positive Prompt",
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": ["Professional product photography, luxury setting, elegant composition, soft diffused lighting, high-end commercial style, 8k quality, sharp focus"],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 9,
      "type": "CLIPVisionEncode",
      "pos": [-600, -550],
      "size": [300, 50],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {
          "name": "clip_vision",
          "type": "CLIP_VISION",
          "link": 14
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 3
        }
      ],
      "outputs": [
        {
          "name": "CLIP_VISION_OUTPUT",
          "type": "CLIP_VISION_OUTPUT",
          "slot_index": 0,
          "links": [18]
        }
      ],
      "title": "üîç Encode Background Style",
      "properties": {
        "Node name for S&R": "CLIPVisionEncode"
      },
      "widgets_values": [],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 10,
      "type": "StyleModelApply",
      "pos": [-600, -400],
      "size": [300, 50],
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [
        {
          "name": "conditioning",
          "type": "CONDITIONING",
          "link": 16
        },
        {
          "name": "style_model",
          "type": "STYLE_MODEL",
          "link": 15
        },
        {
          "name": "clip_vision_output",
          "type": "CLIP_VISION_OUTPUT",
          "link": 18
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": [19]
        }
      ],
      "title": "üé® Apply Redux Style",
      "properties": {
        "Node name for S&R": "StyleModelApply"
      },
      "widgets_values": [],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 11,
      "type": "ConditioningZeroOut",
      "pos": [-600, -250],
      "size": [300, 50],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [
        {
          "name": "conditioning",
          "type": "CONDITIONING",
          "link": 17
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": [20]
        }
      ],
      "title": "‚ùå Negative (Zero)",
      "properties": {
        "Node name for S&R": "ConditioningZeroOut"
      },
      "widgets_values": [],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 12,
      "type": "FluxGuidance",
      "pos": [-200, -700],
      "size": [250, 100],
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [
        {
          "name": "conditioning",
          "type": "CONDITIONING",
          "link": 19
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": [22]
        }
      ],
      "title": "üéØ FLUX Guidance",
      "properties": {
        "Node name for S&R": "FluxGuidance"
      },
      "widgets_values": [3.5],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 13,
      "type": "InpaintModelConditioning",
      "pos": [-200, -500],
      "size": [350, 150],
      "flags": {},
      "order": 15,
      "mode": 0,
      "inputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 22
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 20
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 11
        },
        {
          "name": "pixels",
          "type": "IMAGE",
          "link": 1
        },
        {
          "name": "mask",
          "type": "MASK",
          "link": 21
        }
      ],
      "outputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": [23]
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "slot_index": 1,
          "links": [24]
        },
        {
          "name": "latent",
          "type": "LATENT",
          "slot_index": 2,
          "links": [25]
        }
      ],
      "title": "üñåÔ∏è Inpaint Conditioning",
      "properties": {
        "Node name for S&R": "InpaintModelConditioning"
      },
      "widgets_values": [],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 14,
      "type": "GrowMask",
      "pos": [-600, 0],
      "size": [250, 100],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 26
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "slot_index": 0,
          "links": [21]
        }
      ],
      "title": "üìè Grow Mask",
      "properties": {
        "Node name for S&R": "GrowMask"
      },
      "widgets_values": [32, false],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 15,
      "type": "ImageToMask",
      "pos": [-600, 150],
      "size": [250, 100],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 2
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "slot_index": 0,
          "links": [26]
        }
      ],
      "title": "üé≠ Image ‚Üí Mask",
      "properties": {
        "Node name for S&R": "ImageToMask"
      },
      "widgets_values": ["red"],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 16,
      "type": "KSampler",
      "pos": [250, -500],
      "size": [315, 262],
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 10
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 23
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 24
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 25
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "slot_index": 0,
          "links": [27]
        }
      ],
      "title": "üé≤ FLUX Sampler (High Quality)",
      "properties": {
        "Node name for S&R": "KSampler"
      },
      "widgets_values": [123456789, "randomize", 35, 1, "deis", "beta", 1],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 17,
      "type": "VAEDecode",
      "pos": [650, -450],
      "size": [250, 50],
      "flags": {},
      "order": 17,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 27
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 12
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [28, 29, 50, 100]
        }
      ],
      "title": "üñºÔ∏è Decode FLUX Image",
      "properties": {
        "Node name for S&R": "VAEDecode"
      },
      "widgets_values": [],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 18,
      "type": "PreviewImage",
      "pos": [650, -300],
      "size": [300, 250],
      "flags": {},
      "order": 18,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 28
        }
      ],
      "outputs": [],
      "title": "üëÄ Preview FLUX Result",
      "properties": {
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": [],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 19,
      "type": "SaveImage",
      "pos": [1000, -300],
      "size": [300, 270],
      "flags": {},
      "order": 19,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 29
        }
      ],
      "outputs": [],
      "title": "üíæ Save FLUX Image",
      "properties": {
        "Node name for S&R": "SaveImage"
      },
      "widgets_values": ["flux_redux_product"],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 30,
      "type": "WanVideoModelLoader",
      "pos": [1450, -1100],
      "size": [400, 318],
      "flags": {},
      "order": 20,
      "mode": 0,
      "inputs": [
        {
          "name": "compile_args",
          "shape": 7,
          "type": "WANCOMPILEARGS",
          "link": null
        },
        {
          "name": "block_swap_args",
          "shape": 7,
          "type": "BLOCKSWAPARGS",
          "link": null
        },
        {
          "name": "lora",
          "shape": 7,
          "type": "WANVIDLORA",
          "link": null
        },
        {
          "name": "vram_management_args",
          "shape": 7,
          "type": "WANVRAMARGS",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "wan_video_model",
          "type": "WANVIDEOMODEL",
          "slot_index": 0,
          "links": [51]
        }
      ],
      "title": "üß† Wan 2.1 14B (NO Block Swap!)",
      "properties": {
        "Node name for S&R": "WanVideoModelLoader"
      },
      "widgets_values": [
        "wan2.1_i2v_720p_14B_bf16.safetensors",
        "bf16",
        "sageattn",
        false,
        false,
        false,
        false,
        1
      ],
      "color": "#324",
      "bgcolor": "#546"
    },
    {
      "id": 31,
      "type": "WanVideoVAELoader",
      "pos": [1450, -700],
      "size": [350, 58],
      "flags": {},
      "order": 21,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "vae",
          "type": "WANVAE",
          "slot_index": 0,
          "links": [52, 53]
        }
      ],
      "title": "üéûÔ∏è Wan VAE",
      "properties": {
        "Node name for S&R": "WanVideoVAELoader"
      },
      "widgets_values": ["wan_2.1_vae.safetensors", "fp16"],
      "color": "#324",
      "bgcolor": "#546"
    },
    {
      "id": 32,
      "type": "WanVideoTextEncoderLoader",
      "pos": [1450, -550],
      "size": [350, 82],
      "flags": {},
      "order": 22,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "wan_text_encoder",
          "type": "WANTEXTENCODER",
          "slot_index": 0,
          "links": [54]
        }
      ],
      "title": "üìù UMT5 XXL (FP16 Full)",
      "properties": {
        "Node name for S&R": "WanVideoTextEncoderLoader"
      },
      "widgets_values": ["umt5_xxl_fp16.safetensors", "fp16"],
      "color": "#324",
      "bgcolor": "#546"
    },
    {
      "id": 34,
      "type": "WanVideoTextEncode",
      "pos": [1950, -700],
      "size": [450, 200],
      "flags": {},
      "order": 23,
      "mode": 0,
      "inputs": [
        {
          "name": "positive_prompt",
          "type": "STRING",
          "widget": {
            "name": "positive_prompt"
          },
          "link": null
        },
        {
          "name": "negative_prompt",
          "type": "STRING",
          "widget": {
            "name": "negative_prompt"
          },
          "link": null
        },
        {
          "name": "wan_text_encoder",
          "type": "WANTEXTENCODER",
          "link": 54
        }
      ],
      "outputs": [
        {
          "name": "text_embeds",
          "type": "WANVIDEOTEXTEMBEDS",
          "slot_index": 0,
          "links": [55]
        }
      ],
      "title": "‚úçÔ∏è Video Prompts",
      "properties": {
        "Node name for S&R": "WanVideoTextEncode"
      },
      "widgets_values": [
        "Cinematic smooth camera movement, product showcase video, elegant reveal, professional commercial, subtle motion, soft lighting transition, premium brand aesthetic, 4k quality",
        "blurry, distorted, low quality, watermark, text overlay, shaky camera, fast motion, amateur"
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 35,
      "type": "WanVideoImageEncode",
      "pos": [1950, -400],
      "size": [350, 120],
      "flags": {},
      "order": 24,
      "mode": 0,
      "inputs": [
        {
          "name": "vae",
          "type": "WANVAE",
          "link": 52
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 101
        }
      ],
      "outputs": [
        {
          "name": "image_embeds",
          "type": "WANVIDIMAGE_EMBEDS",
          "links": [56],
          "slot_index": 0
        }
      ],
      "title": "üñºÔ∏è Encode Image ‚Üí Wan",
      "properties": {
        "Node name for S&R": "WanVideoImageEncode"
      },
      "widgets_values": [0, 1],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 36,
      "type": "WanVideoSampler",
      "pos": [2500, -800],
      "size": [400, 500],
      "flags": {},
      "order": 25,
      "mode": 0,
      "inputs": [
        {
          "name": "wan_video_model",
          "type": "WANVIDEOMODEL",
          "link": 51
        },
        {
          "name": "image_embeds",
          "shape": 7,
          "type": "WANVIDIMAGE_EMBEDS",
          "link": 56
        },
        {
          "name": "text_embeds",
          "type": "WANVIDEOTEXTEMBEDS",
          "link": 55
        },
        {
          "name": "samples",
          "shape": 7,
          "type": "LATENT",
          "link": null
        },
        {
          "name": "sigmas",
          "shape": 7,
          "type": "SIGMAS",
          "link": null
        },
        {
          "name": "unianimate_poses",
          "shape": 7,
          "type": "UNIANIMATE_POSE",
          "link": null
        },
        {
          "name": "fantasytalking_embeds",
          "shape": 7,
          "type": "FANTASYTALKING_EMBEDS",
          "link": null
        },
        {
          "name": "uni3c_embeds",
          "shape": 7,
          "type": "UNI3C_EMBEDS",
          "link": null
        },
        {
          "name": "multitalk_embeds",
          "shape": 7,
          "type": "MULTITALK_EMBEDS",
          "link": null
        },
        {
          "name": "freeinit_args",
          "shape": 7,
          "type": "FREEINITARGS",
          "link": null
        },
        {
          "name": "clip_vision_output",
          "shape": 7,
          "type": "CLIP_VISION_OUTPUT",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "slot_index": 0,
          "links": [57]
        },
        {
          "name": "denoised_samples",
          "type": "LATENT",
          "links": null
        }
      ],
      "title": "üé≤ Video Sampler (1080p - 90GB)",
      "properties": {
        "Node name for S&R": "WanVideoSampler"
      },
      "widgets_values": [
        1920,
        1080,
        133,
        35,
        6,
        "fixed",
        12345,
        1,
        1,
        false,
        "comfy",
        0,
        -1,
        false
      ],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 37,
      "type": "WanVideoDecode",
      "pos": [3000, -700],
      "size": [300, 198],
      "flags": {},
      "order": 26,
      "mode": 0,
      "inputs": [
        {
          "name": "vae",
          "type": "WANVAE",
          "link": 53
        },
        {
          "name": "samples",
          "type": "LATENT",
          "link": 57
        }
      ],
      "outputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [58, 59, 70]
        }
      ],
      "title": "üéûÔ∏è Decode Video (Batch 32)",
      "properties": {
        "Node name for S&R": "WanVideoDecode"
      },
      "widgets_values": [true, 32, 16, 192, 192, "default"],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 38,
      "type": "VHS_VideoCombine",
      "pos": [3400, -700],
      "size": [350, 400],
      "flags": {},
      "order": 27,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 58
        },
        {
          "name": "audio",
          "shape": 7,
          "type": "AUDIO",
          "link": null
        },
        {
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "Filenames",
          "type": "VHS_FILENAMES",
          "links": null
        }
      ],
      "title": "üíæ Save Video H.265 (1080p Native)",
      "properties": {
        "Node name for S&R": "VHS_VideoCombine"
      },
      "widgets_values": {
        "frame_rate": 24,
        "loop_count": 0,
        "filename_prefix": "wan21_1080p_native",
        "format": "video/h265-mp4",
        "pix_fmt": "yuv420p10le",
        "crf": 18,
        "save_metadata": true,
        "pingpong": false,
        "save_output": true,
        "videopreview": {
          "hidden": false,
          "paused": false,
          "params": {}
        }
      },
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 39,
      "type": "PreviewImage",
      "pos": [3400, -200],
      "size": [350, 250],
      "flags": {},
      "order": 28,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 59
        }
      ],
      "outputs": [],
      "title": "üëÄ Preview Video Frames",
      "properties": {
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": [],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 40,
      "type": "Note",
      "pos": [1450, -1400],
      "size": [600, 200],
      "flags": {},
      "order": 29,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "üöÄ WAN 2.1 - 90GB VRAM ULTIMATE CONFIG",
      "properties": {},
      "widgets_values": [
        "‚ö° OPTIMISATIONS 90GB VRAM - FULL POWER:\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n‚Ä¢ Mod√®le: 14B BF16 (qualit√© max) - PAS DE BLOCK SWAP!\n‚Ä¢ R√©solution: 1920x1080 FULL HD NATIVE\n‚Ä¢ Frames: 133 (~5.5 secondes √† 24fps)\n‚Ä¢ Decode batch: 32 frames (2x plus rapide)\n‚Ä¢ Steps: 35 (qualit√© max)\n‚Ä¢ SageAttn: activ√©\n‚Ä¢ Face Enhancement: GFPGAN int√©gr√©\n‚Ä¢ Upscaling: Real-ESRGAN 4x vers 4K\n\nüìä VRAM estim√©e: ~70-85GB peak"
      ],
      "color": "#324",
      "bgcolor": "#546"
    },
    {
      "id": 41,
      "type": "Note",
      "pos": [2100, -1400],
      "size": [400, 150],
      "flags": {},
      "order": 30,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "üìÅ Models Required",
      "properties": {},
      "widgets_values": [
        "MOD√àLES REQUIS:\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n‚Ä¢ wan2.1_i2v_720p_14B_bf16.safetensors\n‚Ä¢ wan_2.1_vae.safetensors\n‚Ä¢ umt5_xxl_fp16.safetensors (~9.5GB)\n‚Ä¢ flux1-dev.safetensors\n‚Ä¢ flux1-redux-dev.safetensors\n‚Ä¢ sigclip_vision_patch14_384.safetensors\n‚Ä¢ RealESRGAN_x4plus.pth (optionnel)"
      ],
      "color": "#324",
      "bgcolor": "#546"
    },
    {
      "id": 50,
      "type": "FaceRestoreCFCodeFormer",
      "pos": [1100, -450],
      "size": [350, 150],
      "flags": {},
      "order": 31,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 100
        },
        {
          "name": "facerestore_model",
          "type": "FACERESTORE_MODEL",
          "link": 102
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [101, 103]
        }
      ],
      "title": "üë§ Face Enhance (CodeFormer)",
      "properties": {
        "Node name for S&R": "FaceRestoreCFCodeFormer"
      },
      "widgets_values": [1, 0.6],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 51,
      "type": "FaceRestoreModelLoader",
      "pos": [1100, -550],
      "size": [350, 58],
      "flags": {},
      "order": 32,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "FACERESTORE_MODEL",
          "type": "FACERESTORE_MODEL",
          "slot_index": 0,
          "links": [102]
        }
      ],
      "title": "üß† CodeFormer Model",
      "properties": {
        "Node name for S&R": "FaceRestoreModelLoader"
      },
      "widgets_values": ["codeformer.pth"],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 52,
      "type": "SaveImage",
      "pos": [1100, -200],
      "size": [300, 270],
      "flags": {},
      "order": 33,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 103
        }
      ],
      "outputs": [],
      "title": "üíæ Save Enhanced Image",
      "properties": {
        "Node name for S&R": "SaveImage"
      },
      "widgets_values": ["flux_redux_enhanced"],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 60,
      "type": "UpscaleModelLoader",
      "pos": [3800, -700],
      "size": [350, 58],
      "flags": {},
      "order": 34,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "UPSCALE_MODEL",
          "type": "UPSCALE_MODEL",
          "slot_index": 0,
          "links": [71]
        }
      ],
      "title": "‚¨ÜÔ∏è Real-ESRGAN 4x Model",
      "properties": {
        "Node name for S&R": "UpscaleModelLoader"
      },
      "widgets_values": ["RealESRGAN_x4plus.pth"],
      "color": "#342",
      "bgcolor": "#563"
    },
    {
      "id": 61,
      "type": "ImageUpscaleWithModel",
      "pos": [3800, -550],
      "size": [350, 50],
      "flags": {},
      "order": 35,
      "mode": 0,
      "inputs": [
        {
          "name": "upscale_model",
          "type": "UPSCALE_MODEL",
          "link": 71
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 70
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [72]
        }
      ],
      "title": "‚¨ÜÔ∏è Upscale Video ‚Üí 4K",
      "properties": {
        "Node name for S&R": "ImageUpscaleWithModel"
      },
      "widgets_values": [],
      "color": "#342",
      "bgcolor": "#563"
    },
    {
      "id": 62,
      "type": "VHS_VideoCombine",
      "pos": [3800, -400],
      "size": [350, 400],
      "flags": {},
      "order": 36,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 72
        },
        {
          "name": "audio",
          "shape": 7,
          "type": "AUDIO",
          "link": null
        },
        {
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "Filenames",
          "type": "VHS_FILENAMES",
          "links": null
        }
      ],
      "title": "üíæ Save Video H.265 (4K Upscaled)",
      "properties": {
        "Node name for S&R": "VHS_VideoCombine"
      },
      "widgets_values": {
        "frame_rate": 24,
        "loop_count": 0,
        "filename_prefix": "wan21_4K_upscaled",
        "format": "video/h265-mp4",
        "pix_fmt": "yuv420p10le",
        "crf": 16,
        "save_metadata": true,
        "pingpong": false,
        "save_output": true,
        "videopreview": {
          "hidden": false,
          "paused": false,
          "params": {}
        }
      },
      "color": "#342",
      "bgcolor": "#563"
    },
    {
      "id": 70,
      "type": "Note",
      "pos": [3800, -900],
      "size": [350, 120],
      "flags": {},
      "order": 37,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "üé¨ 4K UPSCALING BRANCH",
      "properties": {},
      "widgets_values": [
        "‚¨ÜÔ∏è UPSCALING 4K:\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n‚Ä¢ Real-ESRGAN 4x: 1080p ‚Üí 4320p (4K+)\n‚Ä¢ CRF 16 = qualit√© maximale\n‚Ä¢ Id√©al pour YouTube/TV"
      ],
      "color": "#342",
      "bgcolor": "#563"
    },
    {
      "id": 71,
      "type": "Note",
      "pos": [1100, -700],
      "size": [350, 100],
      "flags": {},
      "order": 38,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "üë§ FACE ENHANCEMENT BRANCH",
      "properties": {},
      "widgets_values": [
        "üîß AM√âLIORATION VISAGES:\n‚Ä¢ CodeFormer: restauration IA avanc√©e\n‚Ä¢ Fidelity 0.6: balance qualit√©/naturel\n‚Ä¢ Parfait pour UGC avec visages"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 72,
      "type": "Note",
      "pos": [-1400, -1100],
      "size": [500, 120],
      "flags": {},
      "order": 39,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "üì• INPUTS",
      "properties": {},
      "widgets_values": [
        "üñºÔ∏è IMAGES D'ENTR√âE:\n‚Ä¢ product.png: Photo du produit √† mettre en sc√®ne\n‚Ä¢ background.png: R√©f√©rence de style/ambiance\n\nLe workflow fusionne le produit dans le style du background!"
      ],
      "color": "#233",
      "bgcolor": "#455"
    }
  ],
  "links": [
    [1, 1, 0, 15, 0, "IMAGE"],
    [2, 1, 0, 13, 3, "IMAGE"],
    [3, 2, 0, 9, 1, "IMAGE"],
    [10, 3, 0, 16, 0, "MODEL"],
    [11, 4, 0, 13, 2, "VAE"],
    [12, 4, 0, 17, 1, "VAE"],
    [13, 5, 0, 8, 0, "CLIP"],
    [14, 6, 0, 9, 0, "CLIP_VISION"],
    [15, 7, 0, 10, 1, "STYLE_MODEL"],
    [16, 8, 0, 10, 0, "CONDITIONING"],
    [17, 8, 0, 11, 0, "CONDITIONING"],
    [18, 9, 0, 10, 2, "CLIP_VISION_OUTPUT"],
    [19, 10, 0, 12, 0, "CONDITIONING"],
    [20, 11, 0, 13, 1, "CONDITIONING"],
    [21, 14, 0, 13, 4, "MASK"],
    [22, 12, 0, 13, 0, "CONDITIONING"],
    [23, 13, 0, 16, 1, "CONDITIONING"],
    [24, 13, 1, 16, 2, "CONDITIONING"],
    [25, 13, 2, 16, 3, "LATENT"],
    [26, 15, 0, 14, 0, "MASK"],
    [27, 16, 0, 17, 0, "LATENT"],
    [28, 17, 0, 18, 0, "IMAGE"],
    [29, 17, 0, 19, 0, "IMAGE"],
    [50, 17, 0, 35, 1, "IMAGE"],
    [51, 30, 0, 36, 0, "WANVIDEOMODEL"],
    [52, 31, 0, 35, 0, "WANVAE"],
    [53, 31, 0, 37, 0, "WANVAE"],
    [54, 32, 0, 34, 2, "WANTEXTENCODER"],
    [55, 34, 0, 36, 2, "WANVIDEOTEXTEMBEDS"],
    [56, 35, 0, 36, 1, "WANVIDIMAGE_EMBEDS"],
    [57, 36, 0, 37, 1, "LATENT"],
    [58, 37, 0, 38, 0, "IMAGE"],
    [59, 37, 0, 39, 0, "IMAGE"],
    [70, 37, 0, 61, 1, "IMAGE"],
    [71, 60, 0, 61, 0, "UPSCALE_MODEL"],
    [72, 61, 0, 62, 0, "IMAGE"],
    [100, 17, 0, 50, 0, "IMAGE"],
    [101, 50, 0, 35, 1, "IMAGE"],
    [102, 51, 0, 50, 1, "FACERESTORE_MODEL"],
    [103, 50, 0, 52, 0, "IMAGE"]
  ],
  "groups": [
    {
      "id": 1,
      "title": "üì• INPUT IMAGES",
      "bounding": [-1450, -1150, 450, 900],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 2,
      "title": "üß† FLUX REDUX - FP16 Models",
      "bounding": [-1100, 50, 400, 750],
      "color": "#8AA",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 3,
      "title": "‚ö° FLUX REDUX - Processing",
      "bounding": [-650, -900, 800, 700],
      "color": "#A8A",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 4,
      "title": "üë§ FACE ENHANCEMENT",
      "bounding": [1050, -750, 400, 700],
      "color": "#A88",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 5,
      "title": "üé¨ WAN 2.1 - 90GB ULTIMATE (NO Block Swap)",
      "bounding": [1400, -1450, 550, 1000],
      "color": "#AA8",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 6,
      "title": "üé• WAN 2.1 - 1080p Video Generation",
      "bounding": [1900, -850, 1050, 700],
      "color": "#8A8",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 7,
      "title": "üíæ OUTPUT 1080p NATIVE (H.265)",
      "bounding": [3350, -800, 400, 700],
      "color": "#A88",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 8,
      "title": "‚¨ÜÔ∏è OUTPUT 4K UPSCALED (Real-ESRGAN)",
      "bounding": [3750, -950, 450, 1000],
      "color": "#8A8",
      "font_size": 24,
      "flags": {}
    }
  ],
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.5,
      "offset": [500, 1200]
    },
    "info": {
      "name": "FLUX Redux + Wan 2.1 UGC - 90GB VRAM ULTIMATE",
      "author": "Claude",
      "description": "Ultimate pipeline for 90GB VRAM: 1080p native, 4K upscaled, face enhancement, no block swap",
      "version": "3.0",
      "vram_required": "90GB",
      "features": [
        "1920x1080 native video generation",
        "133 frames (~5.5 seconds)",
        "Face enhancement with CodeFormer",
        "4K upscaling with Real-ESRGAN",
        "No block swap (maximum speed)",
        "H.265 10-bit output"
      ],
      "requirements": [
        "ComfyUI-VideoHelperSuite",
        "ComfyUI-WanVideo",
        "ComfyUI-FLUX",
        "ComfyUI-FaceRestore",
        "comfyui_essentials or upscale nodes"
      ]
    },
    "workflowRendererVersion": "LG",
    "frontendVersion": "1.38.12",
    "VHS_latentpreview": false,
    "VHS_latentpreviewrate": 0,
    "VHS_MetadataImage": true,
    "VHS_KeepIntermediate": true
  },
  "version": 0.4
}
