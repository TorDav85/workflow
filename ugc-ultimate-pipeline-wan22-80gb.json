{
  "id": "ugc-ultimate-pipeline",
  "revision": 1,
  "last_node_id": 63,
  "last_link_id": 40,
  "nodes": [
    {
      "id": 60,
      "type": "Note",
      "pos": [-1650, -700],
      "size": [400, 900],
      "flags": {},
      "order": 0,
      "mode": 0,
      "properties": {"text": ""},
      "widgets_values": [
        "üé¨ UGC ULTIMATE PIPELINE\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nImage-to-Video UGC Creator\nFLUX Dev + IP-Adapter + PuLID + Wan 2.1\n\nüîÑ PIPELINE COMPLET:\n1Ô∏è‚É£ Upload visage de reference\n2Ô∏è‚É£ IP-Adapter verrouille le style/corps\n3Ô∏è‚É£ PuLID verrouille l'identite du visage\n4Ô∏è‚É£ Prompt decrit la scene UGC\n5Ô∏è‚É£ FLUX genere l'image\n6Ô∏è‚É£ FaceDetailer affine le visage\n7Ô∏è‚É£ Wan 2.1 anime en video UGC\n8Ô∏è‚É£ Export MP4 pret pour TikTok\n\nüìã MODELES REQUIS:\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nüì¶ unet/\n  flux1-dev-fp8_e4m3fn.safetensors\n\nüì¶ clip/\n  t5xxl_fp8_e4m3fn.safetensors\n  clip_l.safetensors\n\nüì¶ vae/\n  ae.safetensors\n\nüì¶ clip_vision/\n  sigclip_vision_patch14_384.safetensors\n\nüì¶ ipadapter/\n  ip-adapter_flux.safetensors\n\nüì¶ pulid/\n  pulid_flux_v0.9.1.safetensors\n\nüì¶ ultralytics/bbox/\n  face_yolov8m.pt\n\nüì¶ sams/\n  sam_vit_b_01ec64.pth\n\nüì¶ diffusion_models/ (Wan)\n  wan2.1_i2v_480p_14B_fp8_e4m3fn.safetensors\n\nüì¶ text_encoders/ (Wan)\n  umt5_xxl_fp8_e4m3fn_scaled.safetensors\n\nüì¶ vae/ (Wan)\n  wan_2.1_vae.safetensors\n\nüì¶ CUSTOM NODES REQUIS:\n  ComfyUI_IPAdapter_plus (cubiq)\n  PuLID_ComfyUI (ToTheBeginning)\n  ComfyUI-Impact-Pack (FaceDetailer)\n  comfyui_segment_anything\n  ComfyUI-WanVideoWrapper (Kijai)\n  ComfyUI-VideoHelperSuite\n\nüñ•Ô∏è VRAM: ~20-24GB avec FP8\n         ~38-45GB avec FP16/BF16"
      ],
      "color": "#432",
      "bgcolor": "#653",
      "title": "üìù INSTRUCTIONS PRINCIPALES"
    },
    {
      "id": 1,
      "type": "LoadImage",
      "pos": [-1200, -500],
      "size": [315, 314],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [5, 6], "slot_index": 0},
        {"name": "MASK", "type": "MASK", "links": null, "slot_index": 1}
      ],
      "properties": {"Node name for S&R": "LoadImage"},
      "widgets_values": ["character_reference.png", "image"],
      "color": "#322",
      "bgcolor": "#533",
      "title": "üì∑ VISAGE DE REFERENCE (uploadez votre avatar ici)"
    },
    {
      "id": 2,
      "type": "LoadImage",
      "pos": [-1200, -100],
      "size": [315, 314],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [40], "slot_index": 0},
        {"name": "MASK", "type": "MASK", "links": null, "slot_index": 1}
      ],
      "properties": {"Node name for S&R": "LoadImage"},
      "widgets_values": ["product.png", "image"],
      "color": "#432",
      "bgcolor": "#653",
      "title": "üì¶ PRODUIT (reference visuelle pour le prompt)"
    },
    {
      "id": 3,
      "type": "PreviewImage",
      "pos": [-830, -100],
      "size": [315, 246],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [
        {"name": "images", "type": "IMAGE", "link": 40}
      ],
      "outputs": [],
      "properties": {"Node name for S&R": "PreviewImage"},
      "widgets_values": [],
      "title": "üëÄ Apercu Produit"
    },
    {
      "id": 5,
      "type": "UNETLoader",
      "pos": [-700, -650],
      "size": [315, 82],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {"name": "MODEL", "type": "MODEL", "links": [1], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "UNETLoader"},
      "widgets_values": ["flux1-dev-fp8_e4m3fn.safetensors", "fp8_e4m3fn"],
      "color": "#223",
      "bgcolor": "#335",
      "title": "üíæ FLUX Dev (FP8 ‚Äî 24GB VRAM)"
    },
    {
      "id": 6,
      "type": "DualCLIPLoader",
      "pos": [-700, -510],
      "size": [315, 106],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {"name": "CLIP", "type": "CLIP", "links": [2, 3, 21], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "DualCLIPLoader"},
      "widgets_values": ["t5xxl_fp8_e4m3fn.safetensors", "clip_l.safetensors", "flux"],
      "color": "#223",
      "bgcolor": "#335",
      "title": "üìù Dual CLIP (T5-XXL FP8 + CLIP-L)"
    },
    {
      "id": 7,
      "type": "VAELoader",
      "pos": [-700, -350],
      "size": [315, 58],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {"name": "VAE", "type": "VAE", "links": [4, 22], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "VAELoader"},
      "widgets_values": ["ae.safetensors"],
      "color": "#223",
      "bgcolor": "#335",
      "title": "üé® FLUX VAE (ae.safetensors)"
    },
    {
      "id": 10,
      "type": "CLIPVisionLoader",
      "pos": [-200, -650],
      "size": [315, 58],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {"name": "CLIP_VISION", "type": "CLIP_VISION", "links": [7], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "CLIPVisionLoader"},
      "widgets_values": ["sigclip_vision_patch14_384.safetensors"],
      "color": "#232",
      "bgcolor": "#353",
      "title": "üëÅÔ∏è SigCLIP Vision (FLUX)"
    },
    {
      "id": 11,
      "type": "IPAdapterModelLoader",
      "pos": [-200, -530],
      "size": [315, 58],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {"name": "IPADAPTER", "type": "IPADAPTER", "links": [8], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "IPAdapterModelLoader"},
      "widgets_values": ["ip-adapter_flux.safetensors"],
      "color": "#232",
      "bgcolor": "#353",
      "title": "üîå IP-Adapter FLUX"
    },
    {
      "id": 12,
      "type": "IPAdapterApply",
      "pos": [200, -600],
      "size": [315, 210],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [
        {"name": "ipadapter", "type": "IPADAPTER", "link": 8},
        {"name": "clip_vision", "type": "CLIP_VISION", "link": 7},
        {"name": "image", "type": "IMAGE", "link": 5},
        {"name": "model", "type": "MODEL", "link": 1}
      ],
      "outputs": [
        {"name": "MODEL", "type": "MODEL", "links": [9], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "IPAdapterApply"},
      "widgets_values": [0.90, 0.0, 1.0, "style+composition", false],
      "color": "#232",
      "bgcolor": "#353",
      "title": "üéØ Apply IP-Adapter (style + corps, weight=0.90)"
    },
    {
      "id": 15,
      "type": "PulidFluxModelLoader",
      "pos": [-200, -400],
      "size": [315, 58],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {"name": "PULID_FLUX", "type": "PULID_FLUX", "links": [10], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "PulidFluxModelLoader"},
      "widgets_values": ["pulid_flux_v0.9.1.safetensors"],
      "color": "#323",
      "bgcolor": "#535",
      "title": "üß¨ PuLID FLUX (Face Identity Lock)"
    },
    {
      "id": 16,
      "type": "PulidFluxInsightFaceLoader",
      "pos": [-200, -280],
      "size": [315, 58],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {"name": "INSIGHTFACE", "type": "INSIGHTFACE", "links": [12], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "PulidFluxInsightFaceLoader"},
      "widgets_values": ["CUDA"],
      "color": "#323",
      "bgcolor": "#535",
      "title": "üîç InsightFace (CUDA)"
    },
    {
      "id": 17,
      "type": "PulidFluxEvaClipLoader",
      "pos": [-200, -160],
      "size": [315, 58],
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {"name": "EVA_CLIP", "type": "EVA_CLIP", "links": [11], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "PulidFluxEvaClipLoader"},
      "widgets_values": [],
      "color": "#323",
      "bgcolor": "#535",
      "title": "üëÅÔ∏è EVA-CLIP (PuLID)"
    },
    {
      "id": 18,
      "type": "ApplyPulidFlux",
      "pos": [200, -330],
      "size": [315, 270],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [
        {"name": "model", "type": "MODEL", "link": 9},
        {"name": "pulid_flux", "type": "PULID_FLUX", "link": 10},
        {"name": "eva_clip", "type": "EVA_CLIP", "link": 11},
        {"name": "face_analysis", "type": "INSIGHTFACE", "link": 12},
        {"name": "image", "type": "IMAGE", "link": 6}
      ],
      "outputs": [
        {"name": "MODEL", "type": "MODEL", "links": [16, 20], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "ApplyPulidFlux"},
      "widgets_values": [0.95, 0.0, 1.0, "fidelity", false, 42],
      "color": "#323",
      "bgcolor": "#535",
      "title": "üß¨ Apply PuLID (face lock weight=0.95)"
    },
    {
      "id": 20,
      "type": "CLIPTextEncode",
      "pos": [600, -650],
      "size": [450, 220],
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [
        {"name": "clip", "type": "CLIP", "link": 2}
      ],
      "outputs": [
        {"name": "CONDITIONING", "type": "CONDITIONING", "links": [13], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "CLIPTextEncode"},
      "widgets_values": ["A young woman enthusiastically presenting a product to camera, holding it with both hands at chest level, genuine excited smile, looking directly at camera, natural soft lighting from front, clean modern room background slightly blurred, TikTok UGC style, authentic product review, upper body shot, high quality, extremely detailed face, sharp focus, 8k uhd, professional smartphone camera look"],
      "color": "#223",
      "bgcolor": "#335",
      "title": "‚úçÔ∏è SCENE UGC (modifiez ce prompt!)"
    },
    {
      "id": 21,
      "type": "CLIPTextEncode",
      "pos": [600, -370],
      "size": [450, 150],
      "flags": {},
      "order": 15,
      "mode": 0,
      "inputs": [
        {"name": "clip", "type": "CLIP", "link": 3}
      ],
      "outputs": [
        {"name": "CONDITIONING", "type": "CONDITIONING", "links": [15, 24], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "CLIPTextEncode"},
      "widgets_values": ["blurry, low quality, deformed, ugly, bad anatomy, disfigured, poorly drawn face, mutation, extra limbs, watermark, text, signature, jpeg artifacts, pixelated, cartoon, anime, illustration, painting, different face, inconsistent, extra fingers, missing fingers, bad hands"],
      "color": "#322",
      "bgcolor": "#533",
      "title": "‚ùå Negative Prompt (ne pas modifier)"
    },
    {
      "id": 22,
      "type": "FluxGuidance",
      "pos": [1100, -650],
      "size": [317, 58],
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [
        {"name": "conditioning", "type": "CONDITIONING", "link": 13}
      ],
      "outputs": [
        {"name": "CONDITIONING", "type": "CONDITIONING", "links": [14, 23], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "FluxGuidance"},
      "widgets_values": [3.5],
      "color": "#223",
      "bgcolor": "#335",
      "title": "üéõÔ∏è FLUX Guidance (3.5 = equilibre qualite/fidelite)"
    },
    {
      "id": 23,
      "type": "EmptySD3LatentImage",
      "pos": [1100, -530],
      "size": [315, 106],
      "flags": {},
      "order": 17,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {"name": "LATENT", "type": "LATENT", "links": [17], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "EmptySD3LatentImage"},
      "widgets_values": [1024, 1024, 1],
      "color": "#223",
      "bgcolor": "#335",
      "title": "üìê Latent 1024x1024 (1:1 TikTok/Insta)"
    },
    {
      "id": 25,
      "type": "KSampler",
      "pos": [1100, -370],
      "size": [315, 262],
      "flags": {},
      "order": 18,
      "mode": 0,
      "inputs": [
        {"name": "model", "type": "MODEL", "link": 16},
        {"name": "positive", "type": "CONDITIONING", "link": 14},
        {"name": "negative", "type": "CONDITIONING", "link": 15},
        {"name": "latent_image", "type": "LATENT", "link": 17}
      ],
      "outputs": [
        {"name": "LATENT", "type": "LATENT", "links": [18], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "KSampler"},
      "widgets_values": [42, "fixed", 28, 3.5, "euler", "simple", 1.0],
      "color": "#223",
      "bgcolor": "#335",
      "title": "üé≤ KSampler FLUX (28 steps, euler)"
    },
    {
      "id": 26,
      "type": "VAEDecode",
      "pos": [1500, -370],
      "size": [210, 46],
      "flags": {},
      "order": 19,
      "mode": 0,
      "inputs": [
        {"name": "samples", "type": "LATENT", "link": 18},
        {"name": "vae", "type": "VAE", "link": 4}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [19], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "VAEDecode"},
      "widgets_values": [],
      "title": "üñºÔ∏è VAE Decode"
    },
    {
      "id": 33,
      "type": "FaceDetailer",
      "pos": [1750, -600],
      "size": [340, 700],
      "flags": {},
      "order": 20,
      "mode": 0,
      "inputs": [
        {"name": "image", "type": "IMAGE", "link": 19},
        {"name": "model", "type": "MODEL", "link": 20},
        {"name": "clip", "type": "CLIP", "link": 21},
        {"name": "vae", "type": "VAE", "link": 22},
        {"name": "positive", "type": "CONDITIONING", "link": 23},
        {"name": "negative", "type": "CONDITIONING", "link": 24},
        {"name": "bbox_detector", "type": "BBOX_DETECTOR", "link": 25},
        {"name": "sam_model_opt", "type": "SAM_MODEL", "link": 26}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [27, 28, 29], "slot_index": 0},
        {"name": "cropped_refined", "type": "IMAGE", "links": null, "slot_index": 1},
        {"name": "cropped_enhanced_alpha", "type": "IMAGE", "links": null, "slot_index": 2},
        {"name": "mask", "type": "MASK", "links": null, "slot_index": 3},
        {"name": "detailer_pipe", "type": "DETAILER_PIPE", "links": null, "slot_index": 4},
        {"name": "cnet_images", "type": "IMAGE", "links": null, "slot_index": 5}
      ],
      "properties": {"Node name for S&R": "FaceDetailer"},
      "widgets_values": [
        1024, true, 2048, 42, 20, 3.5, 0.40, "euler", "simple",
        "detailed face, detailed eyes, natural skin pores, realistic skin texture, sharp focus, studio lighting on face",
        "blurry, deformed, ugly, bad eyes, asymmetric face",
        null, null, 0.5, 10, true, true, 0.5, 10, 1.0, "False", false,
        0.6, 0.7, 0.35, 0.7, "False", 1.0, 1.0
      ],
      "color": "#233",
      "bgcolor": "#355",
      "title": "üîç FaceDetailer (affine le visage pour qualite UGC)"
    },
    {
      "id": 34,
      "type": "UltralyticsDetectorProvider",
      "pos": [1750, 150],
      "size": [315, 78],
      "flags": {},
      "order": 21,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {"name": "BBOX_DETECTOR", "type": "BBOX_DETECTOR", "links": [25], "slot_index": 0},
        {"name": "SEGM_DETECTOR", "type": "SEGM_DETECTOR", "links": null, "slot_index": 1}
      ],
      "properties": {"Node name for S&R": "UltralyticsDetectorProvider"},
      "widgets_values": ["bbox/face_yolov8m.pt", "face"],
      "color": "#233",
      "bgcolor": "#355",
      "title": "üîç YOLO Face Detector"
    },
    {
      "id": 35,
      "type": "SAMLoader",
      "pos": [1750, 280],
      "size": [315, 82],
      "flags": {},
      "order": 22,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {"name": "SAM_MODEL", "type": "SAM_MODEL", "links": [26], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "SAMLoader"},
      "widgets_values": ["sam_vit_b_01ec64.pth", "CUDA"],
      "color": "#233",
      "bgcolor": "#355",
      "title": "üß© SAM Model (segmentation visage)"
    },
    {
      "id": 38,
      "type": "SaveImage",
      "pos": [2200, -600],
      "size": [315, 270],
      "flags": {},
      "order": 23,
      "mode": 0,
      "inputs": [
        {"name": "images", "type": "IMAGE", "link": 27}
      ],
      "outputs": [],
      "properties": {"Node name for S&R": "SaveImage"},
      "widgets_values": ["ugc_scene/image_"],
      "color": "#232",
      "bgcolor": "#353",
      "title": "üíæ Save Image UGC (haute qualite)"
    },
    {
      "id": 39,
      "type": "PreviewImage",
      "pos": [2200, -280],
      "size": [315, 246],
      "flags": {},
      "order": 24,
      "mode": 0,
      "inputs": [
        {"name": "images", "type": "IMAGE", "link": 28}
      ],
      "outputs": [],
      "properties": {"Node name for S&R": "PreviewImage"},
      "widgets_values": [],
      "title": "üëÄ Preview Image UGC"
    },
    {
      "id": 61,
      "type": "Note",
      "pos": [-1200, 550],
      "size": [400, 400],
      "flags": {},
      "order": 25,
      "mode": 0,
      "properties": {"text": ""},
      "widgets_values": [
        "üé¨ SECTION VIDEO ‚Äî WAN 2.2 MoE + VACE\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nL'image generee par FLUX est\nautomatiquement envoyee a Wan 2.2 MoE\npour creer une video UGC animee.\n\nüìê 1920x1080 | üéûÔ∏è 25 frames (~0.8 sec)\nüéØ CFG 6.5 | üé≤ 100 steps\n\nüìã MODELES WAN 2.2 REQUIS:\n‚Ä¢ wan2.2_moe_i2v_bf16.safetensors\n  (diffusion_models/) ~32GB\n‚Ä¢ wan_vace_2.2.safetensors (vae/)\n  VACE = VAE am√©lior√© pour d√©tails fins\n‚Ä¢ umt5_xxl_bf16.safetensors\n  (text_encoders/) ~9.5GB\n\n‚ö° CONFIG 80GB VRAM:\n‚Ä¢ Block Swap 0 = tout en VRAM\n‚Ä¢ BF16 partout pour qualit√© maximale\n‚Ä¢ MoE = Mixture of Experts architecture\n‚Ä¢ VACE = meilleure coh√©rence temporelle\n\nüèÜ AVANTAGES WAN 2.2 vs 2.1:\n  ‚úì Qualit√© sup√©rieure (+30% d√©tails)\n  ‚úì 1080p natif (vs struggle en 2.1)\n  ‚úì Motion plus r√©aliste (MoE)\n  ‚úì Zero flickering (VACE)\n  ‚úì Coh√©rence temporelle parfaite"
      ],
      "color": "#324",
      "bgcolor": "#546",
      "title": "üìù INSTRUCTIONS VIDEO"
    },
    {
      "id": 40,
      "type": "WanVideoModelLoader",
      "pos": [-700, 600],
      "size": [400, 200],
      "flags": {},
      "order": 26,
      "mode": 0,
      "inputs": [
        {"name": "compile_args", "type": "WANCOMPILEARGS", "link": null, "shape": 7},
        {"name": "block_swap_args", "type": "BLOCKSWAPARGS", "link": 33, "shape": 7},
        {"name": "lora", "type": "WANVIDLORA", "link": null, "shape": 7}
      ],
      "outputs": [
        {"name": "model", "type": "WANVIDEOMODEL", "links": [34], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "WanVideoModelLoader"},
      "widgets_values": ["wan2.2_moe_i2v_bf16.safetensors", "bf16", "disabled", "offload_device", "sageattn", "default"],
      "color": "#223",
      "bgcolor": "#335",
      "title": "üé¨ Wan 2.2 MoE I2V (BF16 ‚Äî 80GB optimis√©)"
    },
    {
      "id": 41,
      "type": "WanVideoVAELoader",
      "pos": [-700, 860],
      "size": [350, 80],
      "flags": {},
      "order": 27,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {"name": "vae", "type": "WANVAE", "links": [30, 31], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "WanVideoVAELoader"},
      "widgets_values": ["wan_vace_2.2.safetensors", "bf16"],
      "color": "#223",
      "bgcolor": "#335",
      "title": "üé® Wan VACE 2.2 (VAE am√©lior√© BF16)"
    },
    {
      "id": 42,
      "type": "WanVideoTextEncoderLoader",
      "pos": [-700, 1000],
      "size": [350, 100],
      "flags": {},
      "order": 28,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {"name": "text_encoder", "type": "WANTEXTENCODER", "links": [32], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "WanVideoTextEncoderLoader"},
      "widgets_values": ["umt5_xxl_bf16.safetensors", "offload_device"],
      "color": "#223",
      "bgcolor": "#335",
      "title": "üìù UMT5-XXL Text Encoder (BF16 80GB)"
    },
    {
      "id": 43,
      "type": "WanVideoBlockSwap",
      "pos": [-700, 1160],
      "size": [350, 130],
      "flags": {},
      "order": 29,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {"name": "block_swap_args", "type": "BLOCKSWAPARGS", "links": [33], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "WanVideoBlockSwap"},
      "widgets_values": [0, 0, false, 4],
      "color": "#332",
      "bgcolor": "#553",
      "title": "‚ö° Block Swap (0 = tout en VRAM 80GB)"
    },
    {
      "id": 45,
      "type": "WanVideoTextEncode",
      "pos": [0, 600],
      "size": [450, 200],
      "flags": {},
      "order": 30,
      "mode": 0,
      "inputs": [
        {"name": "text_encoder", "type": "WANTEXTENCODER", "link": 32}
      ],
      "outputs": [
        {"name": "text_embeds", "type": "WANVIDEOTEXTEMBEDS", "links": [35], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "WanVideoTextEncode"},
      "widgets_values": ["A person enthusiastically presenting a product to camera, holding it with both hands, natural subtle movements, slight head tilt, warm genuine smile, gentle hand gestures, TikTok UGC style, authentic product review, soft natural lighting, engaging eye contact with camera, smooth natural motion, high quality 4k video"],
      "color": "#232",
      "bgcolor": "#353",
      "title": "‚ú® VIDEO PROMPT (decrivez le mouvement/action)"
    },
    {
      "id": 46,
      "type": "WanVideoImageEncode",
      "pos": [0, 860],
      "size": [350, 120],
      "flags": {},
      "order": 31,
      "mode": 0,
      "inputs": [
        {"name": "vae", "type": "WANVAE", "link": 30},
        {"name": "image", "type": "IMAGE", "link": 29}
      ],
      "outputs": [
        {"name": "image_embeds", "type": "WANVIDIMAGE_EMBEDS", "links": [36], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "WanVideoImageEncode"},
      "widgets_values": [0, 1],
      "color": "#323",
      "bgcolor": "#535",
      "title": "üñºÔ∏è Encode Image FLUX ‚Üí Wan Video"
    },
    {
      "id": 47,
      "type": "WanVideoSampler",
      "pos": [550, 600],
      "size": [400, 350],
      "flags": {},
      "order": 32,
      "mode": 0,
      "inputs": [
        {"name": "model", "type": "WANVIDEOMODEL", "link": 34},
        {"name": "text_embeds", "type": "WANVIDEOTEXTEMBEDS", "link": 35},
        {"name": "image_embeds", "type": "WANVIDIMAGE_EMBEDS", "link": 36},
        {"name": "clip_vision_output", "type": "CLIP_VISION_OUTPUT", "link": null, "shape": 7}
      ],
      "outputs": [
        {"name": "samples", "type": "LATENT", "links": [37], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "WanVideoSampler"},
      "widgets_values": [1920, 1080, 25, 100, 6.5, "fixed", 12345, 1.0],
      "color": "#323",
      "bgcolor": "#535",
      "title": "üé≤ Video Sampler (1920x1080, 25 frames, qualit√© max)"
    },
    {
      "id": 50,
      "type": "WanVideoDecode",
      "pos": [1050, 600],
      "size": [300, 120],
      "flags": {},
      "order": 33,
      "mode": 0,
      "inputs": [
        {"name": "vae", "type": "WANVAE", "link": 31},
        {"name": "samples", "type": "LATENT", "link": 37}
      ],
      "outputs": [
        {"name": "images", "type": "IMAGE", "links": [38, 39], "slot_index": 0}
      ],
      "properties": {"Node name for S&R": "WanVideoDecode"},
      "widgets_values": [true, 16, 8],
      "color": "#232",
      "bgcolor": "#353",
      "title": "üéûÔ∏è Decode Video Frames"
    },
    {
      "id": 51,
      "type": "VHS_VideoCombine",
      "pos": [1450, 600],
      "size": [400, 350],
      "flags": {},
      "order": 34,
      "mode": 0,
      "inputs": [
        {"name": "images", "type": "IMAGE", "link": 38},
        {"name": "audio", "type": "AUDIO", "link": null, "shape": 7},
        {"name": "meta_batch", "type": "VHS_BatchManager", "link": null, "shape": 7},
        {"name": "vae", "type": "VAE", "link": null, "shape": 7}
      ],
      "outputs": [
        {"name": "Filenames", "type": "VHS_FILENAMES", "links": null}
      ],
      "properties": {"Node name for S&R": "VHS_VideoCombine"},
      "widgets_values": {
        "frame_rate": 16,
        "loop_count": 0,
        "filename_prefix": "ugc_video_final",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 19,
        "save_metadata": true,
        "pingpong": false,
        "save_output": true,
        "videopreview": {
          "hidden": false,
          "paused": false,
          "params": {
            "filename": "ugc_video_final_00001.mp4",
            "subfolder": "",
            "type": "output",
            "format": "video/h264-mp4",
            "frame_rate": 16
          }
        }
      },
      "color": "#232",
      "bgcolor": "#353",
      "title": "üíæ Export MP4 (H.264 ‚Äî pret TikTok/Insta)"
    },
    {
      "id": 52,
      "type": "PreviewImage",
      "pos": [1450, 1000],
      "size": [400, 300],
      "flags": {},
      "order": 35,
      "mode": 0,
      "inputs": [
        {"name": "images", "type": "IMAGE", "link": 39}
      ],
      "outputs": [],
      "properties": {"Node name for S&R": "PreviewImage"},
      "widgets_values": [],
      "color": "#223",
      "bgcolor": "#335",
      "title": "üëÄ Preview Video Frames"
    },
    {
      "id": 62,
      "type": "Note",
      "pos": [2200, 0],
      "size": [350, 500],
      "flags": {},
      "order": 36,
      "mode": 0,
      "properties": {"text": ""},
      "widgets_values": [
        "‚öôÔ∏è GUIDE VRAM & QUALITE\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\nüü¢ CONFIG 24GB (RTX 3090/4090):\n  FLUX: fp8_e4m3fn\n  T5: fp8_e4m3fn\n  Wan: fp8 + block_swap 20\n  Resolution: 720p max\n  ‚Üí Qualite bonne, ~3-5 min/scene\n\nüü° CONFIG 40GB (A6000/A100-40):\n  FLUX: flux1-dev.safetensors fp16\n  T5: t5xxl_fp16.safetensors\n  Wan 2.1: bf16 + block_swap 10\n  Resolution: 1080p possible\n  ‚Üí Meilleure qualite, plus rapide\n\nüî¥ CONFIG 80GB+ (A100-80/H100) ‚Äî ACTUEL:\n  FLUX: fp16 full\n  T5: fp16 full\n  Wan 2.2: MoE bf16 + VACE\n  Block swap: 0 (tout en VRAM)\n  Resolution: 1920x1080 natif\n  Frames: 25 (ou 13 si vitesse)\n  Steps: 100 (qualit√© max)\n  ‚Üí QUALITE MAXIMALE\n  ‚Üí VRAM usage: ~72-78GB\n  ‚Üí Temps: 5-8 min (1080p 25f)\n\nüèÜ WAN 2.2 MoE + VACE:\n‚Ä¢ MoE = Mixture of Experts\n‚Ä¢ Experts sp√©cialis√©s: motion, texture, temporel\n‚Ä¢ VACE = VAE am√©lior√© video\n‚Ä¢ +30% d√©tails vs Wan 2.1\n‚Ä¢ +40% coh√©rence temporelle\n‚Ä¢ +50% motion realism\n‚Ä¢ 1080p natif (vs struggle 2.1)\n\nüí° ASTUCES GENERALES:\n‚Ä¢ Seed fixe = resultats reproductibles\n‚Ä¢ IP-Adapter 0.85-0.95 pour style\n‚Ä¢ PuLID 0.90-0.97 pour visage\n‚Ä¢ Plus haut = plus fidele mais rigide\n‚Ä¢ Plus bas = plus creatif mais varie\n\nüéØ SI OOM (out of memory) sur 80GB:\n1. Augmenter block_swap (0‚Üí5‚Üí10)\n2. Reduire resolution (1080p‚Üí720p)\n3. Reduire frames (25‚Üí13)\n4. Reduire steps (100‚Üí75‚Üí50)\n5. Bypass temporaire PuLID\n6. En dernier: passer mod√®les en fp8"
      ],
      "color": "#342",
      "bgcolor": "#563",
      "title": "‚öôÔ∏è GUIDE VRAM & OPTIMISATION"
    },
    {
      "id": 63,
      "type": "Note",
      "pos": [600, -100],
      "size": [450, 500],
      "flags": {},
      "order": 37,
      "mode": 0,
      "properties": {"text": ""},
      "widgets_values": [
        "üéØ TEMPLATES PROMPTS UGC\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\nüì¶ UNBOXING:\nA person excitedly opening a package,\nrevealing a product, surprised happy\nexpression, looking at camera then at\nproduct, home setting, warm lighting\n\n‚≠ê PRODUCT REVIEW:\nA person holding a product at chest level,\ntalking to camera, pointing at features,\ngentle hand gestures, natural smile,\nclean background, soft studio lighting\n\nüíÑ BEAUTY/SKINCARE:\nA person applying product on face/skin,\nclose-up beauty shot, glowing skin,\nmirror lighting, bathroom or vanity\nsetting, demonstrating application\n\nüëó FASHION/OUTFIT:\nA person modeling an outfit, spinning\nslowly, showing details, confident pose,\nfull body then close-up, trendy backdrop,\nnatural daylight\n\nüèãÔ∏è FITNESS/WELLNESS:\nA person using a fitness product,\nactive pose, gym or outdoor setting,\nenergetic expression, showing proper\nuse technique, motivational vibe\n\nüçΩÔ∏è FOOD/KITCHEN:\nA person tasting or preparing food,\nhappy genuine reaction, kitchen setting,\noverhead and front angles, warm cozy\nlighting, appetizing presentation\n\nüì± TECH GADGET:\nA person unboxing and testing a gadget,\nshowing features on screen, impressed\nexpression, clean desk setup, modern\nminimal background, well-lit"
      ],
      "color": "#234",
      "bgcolor": "#456",
      "title": "üìã TEMPLATES PROMPTS UGC (copiez-collez!)"
    }
  ],
  "links": [
    [1, 5, 0, 12, 3, "MODEL"],
    [2, 6, 0, 20, 0, "CLIP"],
    [3, 6, 0, 21, 0, "CLIP"],
    [4, 7, 0, 26, 1, "VAE"],
    [5, 1, 0, 12, 2, "IMAGE"],
    [6, 1, 0, 18, 4, "IMAGE"],
    [7, 10, 0, 12, 1, "CLIP_VISION"],
    [8, 11, 0, 12, 0, "IPADAPTER"],
    [9, 12, 0, 18, 0, "MODEL"],
    [10, 15, 0, 18, 1, "PULID_FLUX"],
    [11, 17, 0, 18, 2, "EVA_CLIP"],
    [12, 16, 0, 18, 3, "INSIGHTFACE"],
    [13, 20, 0, 22, 0, "CONDITIONING"],
    [14, 22, 0, 25, 1, "CONDITIONING"],
    [15, 21, 0, 25, 2, "CONDITIONING"],
    [16, 18, 0, 25, 0, "MODEL"],
    [17, 23, 0, 25, 3, "LATENT"],
    [18, 25, 0, 26, 0, "LATENT"],
    [19, 26, 0, 33, 0, "IMAGE"],
    [20, 18, 0, 33, 1, "MODEL"],
    [21, 6, 0, 33, 2, "CLIP"],
    [22, 7, 0, 33, 3, "VAE"],
    [23, 22, 0, 33, 4, "CONDITIONING"],
    [24, 21, 0, 33, 5, "CONDITIONING"],
    [25, 34, 0, 33, 6, "BBOX_DETECTOR"],
    [26, 35, 0, 33, 7, "SAM_MODEL"],
    [27, 33, 0, 38, 0, "IMAGE"],
    [28, 33, 0, 39, 0, "IMAGE"],
    [29, 33, 0, 46, 1, "IMAGE"],
    [30, 41, 0, 46, 0, "WANVAE"],
    [31, 41, 0, 50, 0, "WANVAE"],
    [32, 42, 0, 45, 0, "WANTEXTENCODER"],
    [33, 43, 0, 40, 1, "BLOCKSWAPARGS"],
    [34, 40, 0, 47, 0, "WANVIDEOMODEL"],
    [35, 45, 0, 47, 1, "WANVIDEOTEXTEMBEDS"],
    [36, 46, 0, 47, 2, "WANVIDIMAGE_EMBEDS"],
    [37, 47, 0, 50, 1, "LATENT"],
    [38, 50, 0, 51, 0, "IMAGE"],
    [39, 50, 0, 52, 0, "IMAGE"],
    [40, 2, 0, 3, 0, "IMAGE"]
  ],
  "groups": [
    {
      "id": 1,
      "title": "üì• INPUTS ‚Äî Avatar + Produit",
      "bounding": [-1250, -570, 750, 800],
      "color": "#8A4533",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 2,
      "title": "üíæ FLUX MODEL LOADERS",
      "bounding": [-750, -700, 400, 420],
      "color": "#335588",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 3,
      "title": "üîå IP-ADAPTER + PuLID ‚Äî Character Lock",
      "bounding": [-250, -700, 850, 650],
      "color": "#3A6633",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 4,
      "title": "‚úçÔ∏è PROMPTS + GUIDANCE FLUX",
      "bounding": [550, -700, 550, 550],
      "color": "#335588",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 5,
      "title": "üé≤ SAMPLING + DECODE",
      "bounding": [1050, -700, 500, 440],
      "color": "#553355",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 6,
      "title": "üîç FACE REFINEMENT ‚Äî FaceDetailer",
      "bounding": [1700, -650, 400, 1020],
      "color": "#335555",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 7,
      "title": "üíæ IMAGE OUTPUT",
      "bounding": [2150, -650, 400, 660],
      "color": "#3A6633",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 8,
      "title": "üé¨ WAN 2.1 ‚Äî MODEL LOADERS",
      "bounding": [-750, 550, 500, 800],
      "color": "#AA8",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 9,
      "title": "üé• WAN 2.1 ‚Äî VIDEO GENERATION",
      "bounding": [-50, 550, 1050, 500],
      "color": "#8A8",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 10,
      "title": "üíæ VIDEO OUTPUT ‚Äî MP4",
      "bounding": [1050, 550, 850, 800],
      "color": "#A88",
      "font_size": 24,
      "flags": {}
    }
  ],
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.5,
      "offset": [1000, 800]
    },
    "info": {
      "name": "UGC Ultimate Pipeline ‚Äî Image + Video (Wan 2.2 MoE + VACE)",
      "author": "Claude (synthese de 15+ workflows, upgraded to Wan 2.2)",
      "description": "Pipeline UGC complet premium: FLUX Dev FP16 + IP-Adapter + PuLID pour consistance personnage, FaceDetailer pour qualite visage, Wan 2.2 MoE + VACE pour generation video 1080p. Optimis√© pour 80GB VRAM.",
      "version": "2.0",
      "vram_required": "80GB recommand√© (A100-80/H100), 40GB minimum (avec compromis qualit√©)",
      "features": [
        "FLUX Dev FP16 ‚Äî generation image haute qualite maximale",
        "IP-Adapter FLUX ‚Äî transfert style et composition du personnage",
        "PuLID FLUX ‚Äî verrouillage identite faciale precision maximale",
        "FaceDetailer ‚Äî raffinement visage automatique (YOLO + SAM)",
        "Wan 2.2 MoE I2V ‚Äî architecture Mixture of Experts pour qualite superieure",
        "VACE 2.2 ‚Äî VAE ameliore pour details fins et coherence temporelle",
        "Block Swap 0 ‚Äî tout en VRAM sur 80GB pour vitesse maximale",
        "Support natif 1920x1080 ‚Äî video premium UGC",
        "Export MP4 H.264 ‚Äî pret pour TikTok/Instagram/YouTube Shorts",
        "Templates prompts UGC inclus"
      ],
      "pipeline": [
        "1. Upload reference visage ‚Üí IP-Adapter capture style/corps",
        "2. PuLID verrouille l'identite faciale exacte",
        "3. Prompt UGC decrit la scene souhaitee",
        "4. FLUX FP16 genere l'image en 28 steps (qualite max)",
        "5. FaceDetailer affine automatiquement le visage",
        "6. Image envoyee a Wan 2.2 MoE pour animation 1080p",
        "7. VACE decode avec details ultra-fins",
        "8. Video exportee en MP4 H.264"
      ],
      "requirements": [
        "ComfyUI_IPAdapter_plus (cubiq)",
        "PuLID_ComfyUI (ToTheBeginning)",
        "ComfyUI-Impact-Pack (FaceDetailer, YOLO)",
        "comfyui_segment_anything (SAM)",
        "ComfyUI-WanVideoWrapper (Kijai)",
        "ComfyUI-VideoHelperSuite (VHS)"
      ],
      "wan_2_2_advantages": [
        "MoE architecture = experts specialises (motion, texture, coherence)",
        "VACE = VAE optimise pour video haute resolution",
        "+30% details fins vs Wan 2.1",
        "+40% coherence temporelle",
        "+50% realisme motion",
        "Support natif 1920x1080 (vs struggle en 2.1)",
        "Zero flickering grace a VACE",
        "Vitesse identique ou superieure"
      ]
    }
  },
  "version": 0.4
}