{
  "last_node_id": 18,
  "last_link_id": 27,
  "nodes": [
    {
      "id": 1,
      "type": "Note",
      "pos": [0, -400],
      "size": [600, 280],
      "title": "üìù UGC InfiniteTalk - FIXED NODE NAMES",
      "widgets_values": [
        "üéØ Pipeline UGC avec les VRAIS noms de nodes\n\nNodes corrig√©s:\n‚úÖ WanVideoModelLoader (pas LoadWanVideoModel)\n‚úÖ WanVideoVAELoader (pas LoadWanVideoVAE)\n‚úÖ LoadWanVideoT5TextEncoder + WanVideoTextEncodeSingle\n‚úÖ XTTS_TTS (pas XTTSv2)\n‚úÖ WanVideoClipVisionEncode (pour CLIP)\n\nVRAM: ~20-28GB | Temps: 8-15min"
      ]
    },
    {
      "id": 2,
      "type": "LoadImage",
      "pos": [0, 0],
      "size": [320, 314],
      "title": "üßë Avatar Portrait",
      "widgets_values": ["avatar.png", "image"],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [1]},
        {"name": "MASK", "type": "MASK", "links": null}
      ]
    },
    {
      "id": 3,
      "type": "LoadImage",
      "pos": [0, 350],
      "size": [320, 314],
      "title": "üì¶ Product (Detoured PNG)",
      "widgets_values": ["product.png", "image"],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [2]},
        {"name": "MASK", "type": "MASK", "links": [3]}
      ]
    },
    {
      "id": 4,
      "type": "ImageResize",
      "pos": [400, 0],
      "size": [280, 120],
      "title": "üìè Resize Avatar 480x832",
      "widgets_values": [480, 832, "lanczos"],
      "inputs": [
        {"name": "image", "type": "IMAGE", "link": 1}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [4]}
      ]
    },
    {
      "id": 5,
      "type": "ImageResize",
      "pos": [400, 200],
      "size": [280, 120],
      "title": "üìè Resize Product",
      "widgets_values": [180, 180, "lanczos"],
      "inputs": [
        {"name": "image", "type": "IMAGE", "link": 2}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [5]}
      ]
    },
    {
      "id": 6,
      "type": "ImageCompositeMasked",
      "pos": [750, 100],
      "size": [320, 180],
      "title": "üñºÔ∏è Composite Product sur Avatar",
      "widgets_values": [150, 450, true],
      "inputs": [
        {"name": "destination", "type": "IMAGE", "link": 4},
        {"name": "source", "type": "IMAGE", "link": 5},
        {"name": "mask", "type": "MASK", "link": 3}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [6, 7]}
      ]
    },
    {
      "id": 7,
      "type": "PrimitiveString",
      "pos": [0, 750],
      "size": [320, 200],
      "title": "‚úçÔ∏è Script UGC (Multilang)",
      "widgets_values": ["Salut ! Depuis que j'ai int√©gr√© ce rouleau de jade dans ma routine matinale, ma peau a compl√®tement chang√©. Le matin au r√©veil, je le passe sur mon visage pendant 5 minutes, et honn√™tement, √ßa d√©gonfle mes poches sous les yeux instantan√©ment."],
      "outputs": [
        {"name": "STRING", "type": "STRING", "links": [8]}
      ]
    },
    {
      "id": 8,
      "type": "LoadAudio",
      "pos": [0, 1000],
      "size": [320, 100],
      "title": "üé§ Voice Reference (Optional)",
      "widgets_values": ["voice_ref.wav"],
      "outputs": [
        {"name": "AUDIO", "type": "AUDIO", "links": [9]}
      ]
    },
    {
      "id": 9,
      "type": "XTTS_TTS",
      "pos": [400, 800],
      "size": [380, 260],
      "title": "üó£Ô∏è XTTS Multilang TTS",
      "widgets_values": ["fr", "voice_ref.wav", 1.0, 0.75, 50],
      "inputs": [
        {"name": "text", "type": "STRING", "link": 8}
      ],
      "outputs": [
        {"name": "AUDIO", "type": "AUDIO", "links": [10, 11]}
      ]
    },
    {
      "id": 10,
      "type": "CLIPVisionLoader",
      "pos": [1150, 0],
      "size": [300, 60],
      "title": "üîç CLIP Vision",
      "widgets_values": ["clip_vision_h.safetensors"],
      "outputs": [
        {"name": "CLIP_VISION", "type": "CLIP_VISION", "links": [12]}
      ]
    },
    {
      "id": 11,
      "type": "WanVideoClipVisionEncode",
      "pos": [1150, 120],
      "size": [350, 200],
      "title": "üìπ Encode Image for InfiniteTalk",
      "widgets_values": [1.0, "center", "concat", false, 1],
      "inputs": [
        {"name": "clip_vision", "type": "CLIP_VISION", "link": 12},
        {"name": "image_1", "type": "IMAGE", "link": 6}
      ],
      "outputs": [
        {"name": "WANVIDIMAGE_EMBEDS", "type": "WANVIDIMAGE_EMBEDS", "links": [13]}
      ]
    },
    {
      "id": 12,
      "type": "WanVideoModelLoader",
      "pos": [1150, 400],
      "size": [350, 120],
      "title": "üß† Load InfiniteTalk Model",
      "widgets_values": ["Wan2_1-InfiniteTalk-Single_fp8_e4m3fn_scaled_KJ.safetensors", "fp8_e4m3fn", "main_device", false, false, false],
      "outputs": [
        {"name": "WANVIDEOMODEL", "type": "WANVIDEOMODEL", "links": [14]}
      ]
    },
    {
      "id": 13,
      "type": "WanVideoVAELoader",
      "pos": [1150, 580],
      "size": [350, 80],
      "title": "üß† Load Wan VAE",
      "widgets_values": ["Wan2_1_VAE_bf16.safetensors", "bf16"],
      "outputs": [
        {"name": "WANVAE", "type": "WANVAE", "links": [15]}
      ]
    },
    {
      "id": 14,
      "type": "LoadWanVideoT5TextEncoder",
      "pos": [1150, 720],
      "size": [350, 100],
      "title": "üìù Load UMT5 Encoder",
      "widgets_values": ["umt5-xxl-enc-bf16.safetensors", "bf16", "disabled"],
      "outputs": [
        {"name": "WANTEXTENCODER", "type": "WANTEXTENCODER", "links": [16]}
      ]
    },
    {
      "id": 15,
      "type": "WanVideoTextEncodeSingle",
      "pos": [1150, 880],
      "size": [350, 140],
      "title": "üìù Encode Text Prompt",
      "widgets_values": ["A person talking about a product, natural expressions"],
      "inputs": [
        {"name": "t5", "type": "WANTEXTENCODER", "link": 16}
      ],
      "outputs": [
        {"name": "WANVIDEOTEXTEMBEDS", "type": "WANVIDEOTEXTEMBEDS", "links": [17]}
      ]
    },
    {
      "id": 16,
      "type": "WanVideoSampler",
      "pos": [1600, 300],
      "size": [420, 450],
      "title": "üé¨ InfiniteTalk Lip-Sync Generation",
      "widgets_values": [30, 6.0, 1.0, "euler", 20, 42, false, 30],
      "inputs": [
        {"name": "model", "type": "WANVIDEOMODEL", "link": 14},
        {"name": "text_embeds", "type": "WANVIDEOTEXTEMBEDS", "link": 17},
        {"name": "image_embeds", "type": "WANVIDIMAGE_EMBEDS", "link": 13},
        {"name": "audio", "type": "AUDIO", "link": 10}
      ],
      "outputs": [
        {"name": "LATENT", "type": "LATENT", "links": [18]}
      ]
    },
    {
      "id": 17,
      "type": "WanVideoDecode",
      "pos": [2100, 300],
      "size": [300, 140],
      "title": "üîÑ Decode Video Frames",
      "widgets_values": [true, 30],
      "inputs": [
        {"name": "latent", "type": "LATENT", "link": 18},
        {"name": "vae", "type": "WANVAE", "link": 15}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [19]}
      ]
    },
    {
      "id": 18,
      "type": "UpscaleModelLoader",
      "pos": [2100, 550],
      "size": [300, 60],
      "title": "‚¨ÜÔ∏è Load Upscale Model",
      "widgets_values": ["4x-UltraSharp.pth"],
      "outputs": [
        {"name": "UPSCALE_MODEL", "type": "UPSCALE_MODEL", "links": [20]}
      ]
    },
    {
      "id": 19,
      "type": "ImageUpscaleWithModel",
      "pos": [2500, 300],
      "size": [300, 140],
      "title": "‚¨ÜÔ∏è Upscale 4x ‚Üí 1920x3328",
      "inputs": [
        {"name": "upscale_model", "type": "UPSCALE_MODEL", "link": 20},
        {"name": "image", "type": "IMAGE", "link": 19}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [21]}
      ]
    },
    {
      "id": 20,
      "type": "ImageScale",
      "pos": [2900, 300],
      "size": [300, 140],
      "title": "üìê Resize to 1080x1920",
      "widgets_values": ["lanczos", 1080, 1920, "disabled"],
      "inputs": [
        {"name": "image", "type": "IMAGE", "link": 21}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [22]}
      ]
    },
    {
      "id": 21,
      "type": "VHS_VideoCombine",
      "pos": [3300, 300],
      "size": [400, 400],
      "title": "üéûÔ∏è Final Video Export",
      "widgets_values": [30, 0, "UGC_Final_%date%", "video/h264-mp4", "yuv420p", 18, true, true, false, true],
      "inputs": [
        {"name": "images", "type": "IMAGE", "link": 22},
        {"name": "audio", "type": "AUDIO", "link": 11}
      ],
      "outputs": []
    },
    {
      "id": 22,
      "type": "PreviewImage",
      "pos": [750, 350],
      "size": [320, 340],
      "title": "üëÅÔ∏è Preview Composite",
      "inputs": [
        {"name": "images", "type": "IMAGE", "link": 7}
      ]
    }
  ],
  "links": [
    [1, 2, 0, 4, 0, "IMAGE"],
    [2, 3, 0, 5, 0, "IMAGE"],
    [3, 3, 1, 6, 2, "MASK"],
    [4, 4, 0, 6, 0, "IMAGE"],
    [5, 5, 0, 6, 1, "IMAGE"],
    [6, 6, 0, 11, 1, "IMAGE"],
    [7, 6, 0, 22, 0, "IMAGE"],
    [8, 7, 0, 9, 0, "STRING"],
    [9, 8, 0, 9, 1, "AUDIO"],
    [10, 9, 0, 16, 3, "AUDIO"],
    [11, 9, 0, 21, 1, "AUDIO"],
    [12, 10, 0, 11, 0, "CLIP_VISION"],
    [13, 11, 0, 16, 2, "WANVIDIMAGE_EMBEDS"],
    [14, 12, 0, 16, 0, "WANVIDEOMODEL"],
    [15, 13, 0, 17, 1, "WANVAE"],
    [16, 14, 0, 15, 0, "WANTEXTENCODER"],
    [17, 15, 0, 16, 1, "WANVIDEOTEXTEMBEDS"],
    [18, 16, 0, 17, 0, "LATENT"],
    [19, 17, 0, 19, 1, "IMAGE"],
    [20, 18, 0, 19, 0, "UPSCALE_MODEL"],
    [21, 19, 0, 20, 0, "IMAGE"],
    [22, 20, 0, 21, 0, "IMAGE"]
  ],
  "groups": [
    {
      "title": "üì• Inputs",
      "bounding": [-50, -50, 400, 1200],
      "color": "#3f789e"
    },
    {
      "title": "üñºÔ∏è Image Processing",
      "bounding": [350, -50, 750, 400],
      "color": "#408A40"
    },
    {
      "title": "üó£Ô∏è TTS Generation",
      "bounding": [350, 750, 450, 350],
      "color": "#8A4040"
    },
    {
      "title": "üé¨ InfiniteTalk Lip-Sync",
      "bounding": [1100, -50, 1000, 1100],
      "color": "#A88"
    },
    {
      "title": "‚¨ÜÔ∏è Upscaling Pipeline",
      "bounding": [2050, 250, 1000, 250],
      "color": "#8AA"
    },
    {
      "title": "üíæ Final Output",
      "bounding": [3250, 250, 500, 500],
      "color": "#AA8"
    }
  ],
  "version": 0.4
}
