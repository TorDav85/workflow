{
  "last_node_id": 17,
  "last_link_id": 26,
  "nodes": [
    {
      "id": 1,
      "type": "Note",
      "pos": [0, -400],
      "size": [600, 280],
      "flags": {},
      "order": 0,
      "mode": 0,
      "title": "üìù UGC InfiniteTalk - Clean Pipeline",
      "properties": {},
      "widgets_values": [
        "üéØ Pipeline simplifi√© pour cr√©ation UGC\n\nFlux:\n1. Avatar + Product composite (480x832)\n2. TTS multilingue XTTS-v2 avec clonage vocal\n3. InfiniteTalk lip-sync (480x832 @ 30fps)\n4. Upscale 2x ‚Üí 960x1664 ou 4x ‚Üí 1920x3328\n5. Export MP4 avec audio sync\n\nVRAM: ~20-28GB sur L40S\nTemps: ~8-15min pour 10s selon upscale"
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 2,
      "type": "LoadImage",
      "pos": [0, 0],
      "size": [320, 314],
      "flags": {},
      "order": 1,
      "mode": 0,
      "title": "üßë Avatar Portrait",
      "properties": {},
      "widgets_values": ["avatar.png", "image"],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [1]},
        {"name": "MASK", "type": "MASK", "links": null}
      ]
    },
    {
      "id": 3,
      "type": "LoadImage",
      "pos": [0, 350],
      "size": [320, 314],
      "flags": {},
      "order": 2,
      "mode": 0,
      "title": "üì¶ Product (Detoured PNG)",
      "properties": {},
      "widgets_values": ["product.png", "image"],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [2]},
        {"name": "MASK", "type": "MASK", "links": [3]}
      ]
    },
    {
      "id": 4,
      "type": "ImageResize",
      "pos": [400, 0],
      "size": [280, 120],
      "flags": {},
      "order": 3,
      "mode": 0,
      "title": "üìè Resize Avatar 480x832",
      "properties": {},
      "widgets_values": [480, 832, "lanczos"],
      "inputs": [
        {"name": "image", "type": "IMAGE", "link": 1}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [4]}
      ]
    },
    {
      "id": 5,
      "type": "ImageResize",
      "pos": [400, 200],
      "size": [280, 120],
      "flags": {},
      "order": 4,
      "mode": 0,
      "title": "üìè Resize Product",
      "properties": {},
      "widgets_values": [180, 180, "lanczos"],
      "inputs": [
        {"name": "image", "type": "IMAGE", "link": 2}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [5]}
      ]
    },
    {
      "id": 6,
      "type": "ImageCompositeMasked",
      "pos": [750, 100],
      "size": [320, 180],
      "flags": {},
      "order": 5,
      "mode": 0,
      "title": "üñºÔ∏è Composite Product sur Avatar",
      "properties": {},
      "widgets_values": [150, 450, true],
      "inputs": [
        {"name": "destination", "type": "IMAGE", "link": 4},
        {"name": "source", "type": "IMAGE", "link": 5},
        {"name": "mask", "type": "MASK", "link": 3}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [6, 7]}
      ]
    },
    {
      "id": 7,
      "type": "PrimitiveString",
      "pos": [0, 750],
      "size": [320, 200],
      "flags": {},
      "order": 6,
      "mode": 0,
      "title": "‚úçÔ∏è Script UGC (Multilang)",
      "properties": {},
      "widgets_values": ["Bonjour ! D√©couvrez ce produit incroyable qui a transform√© ma routine. Je l'utilise tous les jours et les r√©sultats sont impressionnants !"],
      "outputs": [
        {"name": "STRING", "type": "STRING", "links": [8]}
      ]
    },
    {
      "id": 8,
      "type": "LoadAudio",
      "pos": [0, 1000],
      "size": [320, 100],
      "flags": {},
      "order": 7,
      "mode": 0,
      "title": "üé§ Voice Reference (Optional)",
      "properties": {},
      "widgets_values": ["voice_ref.wav"],
      "outputs": [
        {"name": "AUDIO", "type": "AUDIO", "links": [9]}
      ]
    },
    {
      "id": 9,
      "type": "XTTSv2",
      "pos": [400, 800],
      "size": [380, 260],
      "flags": {},
      "order": 8,
      "mode": 0,
      "title": "üó£Ô∏è XTTS-v2 Multilang TTS",
      "properties": {},
      "widgets_values": ["fr", true, 1.0, "high"],
      "inputs": [
        {"name": "text", "type": "STRING", "link": 8},
        {"name": "ref_audio", "type": "AUDIO", "link": 9}
      ],
      "outputs": [
        {"name": "AUDIO", "type": "AUDIO", "links": [10, 11]}
      ]
    },
    {
      "id": 10,
      "type": "CLIPVisionLoader",
      "pos": [1150, 0],
      "size": [300, 60],
      "flags": {},
      "order": 9,
      "mode": 0,
      "title": "üîç CLIP Vision",
      "properties": {},
      "widgets_values": ["clip_vision_h.safetensors"],
      "outputs": [
        {"name": "CLIP_VISION", "type": "CLIP_VISION", "links": [12]}
      ]
    },
    {
      "id": 11,
      "type": "WanVideoClipVisionEncode",
      "pos": [1150, 120],
      "size": [350, 200],
      "flags": {},
      "order": 10,
      "mode": 0,
      "title": "üìπ Encode Image for InfiniteTalk",
      "properties": {},
      "widgets_values": [1.0, "center", "concat", false, 1],
      "inputs": [
        {"name": "clip_vision", "type": "CLIP_VISION", "link": 12},
        {"name": "image_1", "type": "IMAGE", "link": 6}
      ],
      "outputs": [
        {"name": "WANVIDIMAGE_EMBEDS", "type": "WANVIDIMAGE_EMBEDS", "links": [13]}
      ]
    },
    {
      "id": 12,
      "type": "LoadWanVideoModel",
      "pos": [1150, 400],
      "size": [350, 80],
      "flags": {},
      "order": 11,
      "mode": 0,
      "title": "üß† Load InfiniteTalk Model",
      "properties": {},
      "widgets_values": ["Wan2_1-InfiniteTalk-Single_fp8_e4m3fn_scaled_KJ.safetensors"],
      "outputs": [
        {"name": "WANVIDEOMODEL", "type": "WANVIDEOMODEL", "links": [14]}
      ]
    },
    {
      "id": 13,
      "type": "LoadWanVideoVAE",
      "pos": [1150, 540],
      "size": [350, 60],
      "flags": {},
      "order": 12,
      "mode": 0,
      "title": "üß† Load Wan VAE",
      "properties": {},
      "widgets_values": ["Wan2_1_VAE_bf16.safetensors"],
      "outputs": [
        {"name": "WANVAE", "type": "WANVAE", "links": [15]}
      ]
    },
    {
      "id": 14,
      "type": "WanVideoTextEncode",
      "pos": [1150, 660],
      "size": [350, 140],
      "flags": {},
      "order": 13,
      "mode": 0,
      "title": "üìù UMT5 Text Encoder",
      "properties": {},
      "widgets_values": ["umt5-xxl-enc-bf16.safetensors", "A person talking about a product, natural expressions", 226],
      "outputs": [
        {"name": "WANTEXTENCODER", "type": "WANTEXTENCODER", "links": [16]}
      ]
    },
    {
      "id": 15,
      "type": "WanVideoTextEncodeV2",
      "pos": [1150, 860],
      "size": [350, 120],
      "flags": {},
      "order": 14,
      "mode": 0,
      "title": "üìù Encode Prompt",
      "properties": {},
      "widgets_values": [""],
      "inputs": [
        {"name": "text_encoder", "type": "WANTEXTENCODER", "link": 16}
      ],
      "outputs": [
        {"name": "WANVIDEOTEXTEMBEDS", "type": "WANVIDEOTEXTEMBEDS", "links": [17]}
      ]
    },
    {
      "id": 16,
      "type": "WanVideoSampler",
      "pos": [1600, 300],
      "size": [420, 400],
      "flags": {},
      "order": 15,
      "mode": 0,
      "title": "üé¨ InfiniteTalk Lip-Sync Generation",
      "properties": {},
      "widgets_values": [30, 6.0, 1.0, "euler", 20, 42, false, 30],
      "inputs": [
        {"name": "model", "type": "WANVIDEOMODEL", "link": 14},
        {"name": "text_embeds", "type": "WANVIDEOTEXTEMBEDS", "link": 17},
        {"name": "image_embeds", "type": "WANVIDIMAGE_EMBEDS", "link": 13},
        {"name": "audio", "type": "AUDIO", "link": 10},
        {"name": "latent", "type": "LATENT", "link": null}
      ],
      "outputs": [
        {"name": "LATENT", "type": "LATENT", "links": [18]}
      ]
    },
    {
      "id": 17,
      "type": "WanVideoDecode",
      "pos": [2100, 300],
      "size": [300, 140],
      "flags": {},
      "order": 16,
      "mode": 0,
      "title": "üîÑ Decode Video Frames",
      "properties": {},
      "widgets_values": [true, 30],
      "inputs": [
        {"name": "latent", "type": "LATENT", "link": 18},
        {"name": "vae", "type": "WANVAE", "link": 15}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [19]}
      ]
    },
    {
      "id": 18,
      "type": "UpscaleModelLoader",
      "pos": [2100, 550],
      "size": [300, 60],
      "flags": {},
      "order": 17,
      "mode": 0,
      "title": "‚¨ÜÔ∏è Load Upscale Model",
      "properties": {},
      "widgets_values": ["4x-UltraSharp.pth"],
      "outputs": [
        {"name": "UPSCALE_MODEL", "type": "UPSCALE_MODEL", "links": [20]}
      ]
    },
    {
      "id": 19,
      "type": "ImageUpscaleWithModel",
      "pos": [2500, 300],
      "size": [300, 140],
      "flags": {},
      "order": 18,
      "mode": 0,
      "title": "‚¨ÜÔ∏è Upscale 4x ‚Üí 1920x3328",
      "properties": {},
      "inputs": [
        {"name": "upscale_model", "type": "UPSCALE_MODEL", "link": 20},
        {"name": "image", "type": "IMAGE", "link": 19}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [21]}
      ]
    },
    {
      "id": 20,
      "type": "ImageScale",
      "pos": [2900, 300],
      "size": [300, 140],
      "flags": {},
      "order": 19,
      "mode": 0,
      "title": "üìê Resize to 1080x1920",
      "properties": {},
      "widgets_values": ["lanczos", 1080, 1920, "disabled"],
      "inputs": [
        {"name": "image", "type": "IMAGE", "link": 21}
      ],
      "outputs": [
        {"name": "IMAGE", "type": "IMAGE", "links": [22]}
      ]
    },
    {
      "id": 21,
      "type": "VHS_VideoCombine",
      "pos": [3300, 300],
      "size": [400, 400],
      "flags": {},
      "order": 20,
      "mode": 0,
      "title": "üéûÔ∏è Final Video Export",
      "properties": {},
      "widgets_values": [30, 0, "UGC_Final_%date%", "video/h264-mp4", "yuv420p", 18, true, true, false, true],
      "inputs": [
        {"name": "images", "type": "IMAGE", "link": 22},
        {"name": "audio", "type": "AUDIO", "link": 11}
      ],
      "outputs": [
        {"name": "Filenames", "type": "VHS_FILENAMES", "links": null}
      ]
    },
    {
      "id": 22,
      "type": "PreviewImage",
      "pos": [750, 350],
      "size": [320, 340],
      "flags": {},
      "order": 21,
      "mode": 0,
      "title": "üëÅÔ∏è Preview Composite",
      "properties": {},
      "inputs": [
        {"name": "images", "type": "IMAGE", "link": 7}
      ]
    }
  ],
  "links": [
    [1, 2, 0, 4, 0, "IMAGE"],
    [2, 3, 0, 5, 0, "IMAGE"],
    [3, 3, 1, 6, 2, "MASK"],
    [4, 4, 0, 6, 0, "IMAGE"],
    [5, 5, 0, 6, 1, "IMAGE"],
    [6, 6, 0, 11, 1, "IMAGE"],
    [7, 6, 0, 22, 0, "IMAGE"],
    [8, 7, 0, 9, 0, "STRING"],
    [9, 8, 0, 9, 1, "AUDIO"],
    [10, 9, 0, 16, 3, "AUDIO"],
    [11, 9, 0, 21, 1, "AUDIO"],
    [12, 10, 0, 11, 0, "CLIP_VISION"],
    [13, 11, 0, 16, 2, "WANVIDIMAGE_EMBEDS"],
    [14, 12, 0, 16, 0, "WANVIDEOMODEL"],
    [15, 13, 0, 17, 1, "WANVAE"],
    [16, 14, 0, 15, 0, "WANTEXTENCODER"],
    [17, 15, 0, 16, 1, "WANVIDEOTEXTEMBEDS"],
    [18, 16, 0, 17, 0, "LATENT"],
    [19, 17, 0, 19, 1, "IMAGE"],
    [20, 18, 0, 19, 0, "UPSCALE_MODEL"],
    [21, 19, 0, 20, 0, "IMAGE"],
    [22, 20, 0, 21, 0, "IMAGE"]
  ],
  "groups": [
    {
      "title": "üì• Inputs (Avatar + Product + Script)",
      "bounding": [-50, -50, 400, 1200],
      "color": "#3f789e",
      "font_size": 24
    },
    {
      "title": "üñºÔ∏è Image Processing",
      "bounding": [350, -50, 750, 400],
      "color": "#408A40",
      "font_size": 20
    },
    {
      "title": "üó£Ô∏è TTS Generation",
      "bounding": [350, 750, 450, 350],
      "color": "#8A4040",
      "font_size": 20
    },
    {
      "title": "üé¨ InfiniteTalk Lip-Sync",
      "bounding": [1100, -50, 1000, 1100],
      "color": "#A88",
      "font_size": 20
    },
    {
      "title": "‚¨ÜÔ∏è Upscaling Pipeline",
      "bounding": [2050, 250, 1000, 250],
      "color": "#8AA",
      "font_size": 20
    },
    {
      "title": "üíæ Final Output",
      "bounding": [3250, 250, 500, 500],
      "color": "#AA8",
      "font_size": 20
    }
  ],
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.5,
      "offset": [400, 400]
    }
  },
  "version": 0.4
}
